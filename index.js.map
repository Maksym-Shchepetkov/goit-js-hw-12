{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/img/error.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function fetchData(searchByText, page = 1) {\n  const options = {\n    params: {\n      key: '49096990-1cdaad3cdd2c2184e983643c5',\n      q: searchByText,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 40,\n    },\n  };\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', options);\n    return response; // Повертаємо відповідь від API\n  } catch (error) {\n    console.error('Error fetching data from Pixabay:', error);\n    throw error; // Генеруємо помилку, щоб можна було обробити її у викликаючому коді\n  }\n}\n","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.81%200.219C6.95056%200.0787966%207.14097%204.21785e-05%207.3395%200L16.6605%200C16.859%204.21785e-05%2017.0494%200.0787966%2017.19%200.219L23.781%206.81C23.9212%206.95056%2024%207.14097%2024%207.3395V16.6605C24%2016.859%2023.9212%2017.0494%2023.781%2017.19L17.19%2023.781C17.0494%2023.9212%2016.859%2024%2016.6605%2024H7.3395C7.14097%2024%206.95056%2023.9212%206.81%2023.781L0.219%2017.19C0.0787966%2017.0494%204.21785e-05%2016.859%200%2016.6605L0%207.3395C4.21785e-05%207.14097%200.0787966%206.95056%200.219%206.81L6.81%200.219ZM7.65%201.5L1.5%207.65V16.35L7.65%2022.5H16.35L22.5%2016.35V7.65L16.35%201.5H7.65Z'%20fill='%23FAFAFB'/%3e%3cpath%20d='M6.96888%206.969C7.03854%206.89915%207.12131%206.84374%207.21243%206.80593C7.30354%206.76812%207.40122%206.74866%207.49988%206.74866C7.59853%206.74866%207.69621%206.76812%207.78733%206.80593C7.87844%206.84374%207.96121%206.89915%208.03088%206.969L11.9999%2010.9395L15.9689%206.969C16.0386%206.89927%2016.1214%206.84395%2016.2125%206.80621C16.3036%206.76847%2016.4013%206.74905%2016.4999%206.74905C16.5985%206.74905%2016.6961%206.76847%2016.7873%206.80621C16.8784%206.84395%2016.9611%206.89927%2017.0309%206.969C17.1006%207.03873%2017.1559%207.12151%2017.1937%207.21262C17.2314%207.30373%2017.2508%207.40138%2017.2508%207.5C17.2508%207.59861%2017.2314%207.69626%2017.1937%207.78737C17.1559%207.87848%2017.1006%207.96127%2017.0309%208.031L13.0604%2012L17.0309%2015.969C17.1006%2016.0387%2017.1559%2016.1215%2017.1937%2016.2126C17.2314%2016.3037%2017.2508%2016.4014%2017.2508%2016.5C17.2508%2016.5986%2017.2314%2016.6963%2017.1937%2016.7874C17.1559%2016.8785%2017.1006%2016.9613%2017.0309%2017.031C16.9611%2017.1007%2016.8784%2017.156%2016.7873%2017.1938C16.6961%2017.2315%2016.5985%2017.2509%2016.4999%2017.2509C16.4013%2017.2509%2016.3036%2017.2315%2016.2125%2017.1938C16.1214%2017.156%2016.0386%2017.1007%2015.9689%2017.031L11.9999%2013.0605L8.03088%2017.031C7.96114%2017.1007%207.87836%2017.156%207.78725%2017.1938C7.69614%2017.2315%207.59849%2017.2509%207.49988%2017.2509C7.40126%2017.2509%207.30361%2017.2315%207.2125%2017.1938C7.12139%2017.156%207.03861%2017.1007%206.96888%2017.031C6.89914%2016.9613%206.84383%2016.8785%206.80609%2016.7874C6.76835%2016.6963%206.74893%2016.5986%206.74893%2016.5C6.74893%2016.4014%206.76835%2016.3037%206.80609%2016.2126C6.84383%2016.1215%206.89914%2016.0387%206.96888%2015.969L10.9394%2012L6.96888%208.031C6.89903%207.96133%206.84362%207.87857%206.80581%207.78745C6.768%207.69633%206.74854%207.59865%206.74854%207.5C6.74854%207.40135%206.768%207.30366%206.80581%207.21255C6.84362%207.12143%206.89903%207.03867%206.96888%206.969Z'%20fill='%23FAFAFB'/%3e%3c/svg%3e\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport pathIcon from '../img/error.svg';\n\nexport function showMessage(message1 = '', message2 = '') {\n  if (message2) {\n    iziToast.error({\n      message: message2,\n      position: 'topRight',\n      maxWidth: '432px',\n      iconUrl: pathIcon,\n      iconColor: '#ffffff',\n      messageColor: '#ffffff',\n      backgroundColor: '#ef4040',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n    });\n  }\n  if (message1 && !message2) {\n    iziToast.error({\n      message: message1,\n      position: 'topRight',\n      maxWidth: '432px',\n      iconUrl: pathIcon,\n      iconColor: '#ffffff',\n      messageColor: '#ffffff',\n      backgroundColor: '#ef4040',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n    });\n  }\n}\n\nexport function addMarkup(images) {\n  const generalEl = document.querySelector('.gallery-list');\n\n  if (images.length === 0) {\n    showMessage(\n      `Sorry, there are no images matching your search query. Please try again!`\n    );\n    return;\n  }\n\n  const galleryList = images.map(image => {\n    const galleryItems = document.createElement('li');\n    galleryItems.classList.add('gallery-item');\n\n    const galleryLinks = document.createElement('a');\n    galleryLinks.classList.add('gallery-link');\n    galleryLinks.href = image.largeImageURL;\n\n    const galleryImg = document.createElement('img');\n    galleryImg.classList.add('gallery-image');\n    galleryImg.src = image.webformatURL;\n    galleryImg.alt = image.tags;\n\n    const infoContainer = document.createElement('div');\n    infoContainer.classList.add('info-container');\n\n    const infoItems = [\n      { label: 'Likes', value: image.likes },\n      { label: 'Views', value: image.views },\n      { label: 'Comments', value: image.comments },\n      { label: 'Downloads', value: image.downloads },\n    ];\n\n    infoItems.forEach(item => {\n      const infoParagraph = document.createElement('p');\n      infoParagraph.classList.add('par');\n      infoParagraph.textContent = item.label;\n\n      const infoValue = document.createElement('span');\n      infoValue.classList.add('sub-par');\n      infoValue.textContent = item.value;\n\n      infoParagraph.append(infoValue);\n      infoContainer.append(infoParagraph);\n    });\n\n    galleryItems.append(infoContainer);\n\n    galleryItems.append(galleryLinks);\n\n    galleryLinks.append(galleryImg);\n    return galleryItems;\n  });\n  generalEl.append(...galleryList);\n\n  const modal = new SimpleLightbox('.gallery-list a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  modal.refresh();\n}\n\nexport function showLoader(loader) {\n  loader.classList.remove('hidden');\n}\n\nexport function closeLoader(loader) {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadBtn(loadBtn) {\n  loadBtn.classList.remove('hidden');\n}\n\nexport function hideLoadBtn(loadBtn) {\n  loadBtn.classList.add('hidden');\n}\n\nexport function scrollToGalleryItem() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n","import fetchData from './js/pixabay-api';\nimport {\n  addMarkup,\n  showLoader,\n  closeLoader,\n  showMessage,\n  showLoadBtn,\n  hideLoadBtn,\n  scrollToGalleryItem,\n} from './js/render-functions';\n\nconst form = document.querySelector('.input-container');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery-list');\nconst loadBtn = document.querySelector('.load-btn');\n\nlet currentPage = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nlet loadedImages = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  searchQuery = form.elements.search.value.trim();\n\n  if (searchQuery) {\n    showLoader(loader);\n    currentPage = 1;\n    loadedImages = 0;\n    gallery.insertAdjacentElement('beforebegin', loader);\n    gallery.innerHTML = '';\n    hideLoadBtn(loadBtn);\n\n    setTimeout(async () => {\n      try {\n        const response = await fetchData(searchQuery, currentPage);\n        const images = response.data.hits;\n        totalHits = response.data.totalHits;\n        form.elements.search.value = '';\n\n        if (images.length === 0) {\n          showMessage(`Sorry, no images found. Please try again!`);\n          hideLoadBtn(loadBtn);\n        } else {\n          addMarkup(images);\n\n          scrollToGalleryItem();\n\n          currentPage += 1;\n          loadedImages += images.length;\n\n          if (loadedImages >= totalHits) {\n            hideLoadBtn(loadBtn);\n            showMessage(\n              '',\n              `We're sorry, but you've reached the end of search results.`\n            );\n          } else {\n            showLoadBtn(loadBtn);\n          }\n        }\n      } catch (error) {\n        showMessage(\n          'Sorry, there was an error fetching the images. Please try again!'\n        );\n        hideLoadBtn(loadBtn);\n      } finally {\n        closeLoader(loader);\n      }\n    }, 1000);\n  } else {\n    showMessage('Please enter a search query!');\n  }\n});\n\nloadBtn.addEventListener('click', async e => {\n  e.preventDefault();\n  hideLoadBtn(loadBtn);\n  showLoader(loader);\n  gallery.insertAdjacentElement('afterend', loader);\n\n  setTimeout(async () => {\n    try {\n      const response = await fetchData(searchQuery, currentPage);\n      const images = response.data.hits;\n      loadedImages += images.length;\n\n      if (images.length > 0) {\n        addMarkup(images);\n        currentPage += 1;\n\n        scrollToGalleryItem();\n      }\n\n      if (loadedImages >= totalHits) {\n        hideLoadBtn(loadBtn);\n        showMessage(\n          '',\n          `We're sorry, but you've reached the end of search results.`\n        );\n      } else {\n        showLoadBtn(loadBtn);\n      }\n    } catch (error) {\n      showMessage(\n        'Sorry, there was an error fetching more images. Please try again!'\n      );\n    } finally {\n      closeLoader(loader);\n      if (loadedImages < totalHits) {\n        showLoadBtn(loadBtn); // Показуємо кнопку, якщо ще є зображення\n      }\n    }\n  }, 1000);\n});\n"],"names":["fetchData","searchByText","page","options","axios","error","pathIcon","showMessage","message1","message2","iziToast","addMarkup","images","generalEl","galleryList","image","galleryItems","galleryLinks","galleryImg","infoContainer","item","infoParagraph","infoValue","SimpleLightbox","showLoader","loader","closeLoader","showLoadBtn","loadBtn","hideLoadBtn","scrollToGalleryItem","galleryItem","itemHeight","form","gallery","currentPage","searchQuery","totalHits","loadedImages","event","response"],"mappings":"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"}